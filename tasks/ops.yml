version: '3'

tasks:
  clean:
    desc: Remove node_modules and dist
    cmds:
      - rm -rf node_modules dist

  kill-ports:
    desc: Force kill processes on ports 3000 (Vessel), 3001 (Relay), 5173 (Shipyard)
    cmds:
      - "lsof -ti:3000,3001,5173 | xargs kill -9 || true"
      - echo "Ports 3000, 3001, 5173 cleared."

  kill-server:
    desc: Stop all Shipyard processes (Relay & Dev Server)
    cmds:
      - pkill -f "node server/relay.js" || true
      - task: kill-ports
      - echo "Shipyard systems halted."
